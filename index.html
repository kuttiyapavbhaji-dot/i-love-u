<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Happy New Year ‚ù§Ô∏è</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">

<style>
*{margin:0;padding:0;box-sizing:border-box}
body{
  min-height:100vh;
  font-family:Poppins,sans-serif;
  background:radial-gradient(circle at top,#ffd166,#ef476f,#1b1b3a,#000814);
  color:#fff;
  display:flex;
  flex-direction:column;
  align-items:center;
  padding:20px;
  overflow-x:hidden;
}

/* Floating sparks */
.sparks{position:fixed;inset:0;pointer-events:none;z-index:-1}
.spark{position:absolute;font-size:14px;opacity:.8;animation:rise 5s linear infinite}
@keyframes rise{
  0%{transform:translateY(100vh);opacity:0}
  20%{opacity:1}
  100%{transform:translateY(-10vh);opacity:0}
}

header{text-align:center;margin:30px 0}
header h1{font-size:2.8rem;text-shadow:0 0 14px gold}
header p{opacity:.85}

.card{
  max-width:900px;width:100%;
  background:rgba(10,10,25,.9);
  border-radius:24px;
  padding:30px;
  box-shadow:0 20px 50px rgba(0,0,0,.7);
  margin-bottom:26px;
}

.section{text-align:center;margin:30px 0;transition:.4s}
.title{font-size:1.45rem;color:#ffd166;margin-bottom:10px}
.small{font-size:.9rem;opacity:.8}

button,input{
  padding:10px 16px;
  border-radius:12px;
  border:none;
  margin:6px;
  font-family:Poppins,sans-serif
}
button{
  background:linear-gradient(135deg,#ffd166,#ef476f);
  color:#000;
  cursor:pointer;
}
button:hover{transform:scale(1.05)}
input{
  background:rgba(255,255,255,.15);
  color:#fff;
}
.hidden{display:none}
.locked{opacity:.35;pointer-events:none;filter:blur(1px)}

hr{
  border:none;height:1px;
  background:linear-gradient(to right,transparent,rgba(255,255,255,.2),transparent);
  margin:26px 0
}

/* Firework Totem (3D illusion) */
.totem-stage{perspective:1200px;display:flex;justify-content:center;margin:40px 0}
.totem{
  position:relative;width:180px;height:260px;
  transform-style:preserve-3d;
  animation:totemFloat 10s ease-in-out infinite
}
@keyframes totemFloat{
  0%,100%{transform:rotateX(18deg) rotateY(-15deg)}
  50%{transform:rotateX(22deg) rotateY(15deg)}
}
.segment{
  position:absolute;left:50%;
  transform:translateX(-50%);
  width:160px;height:40px;
  border-radius:50%;
  background:radial-gradient(circle at top left,#fff,#ffd166);
  box-shadow:inset -8px -6px 12px rgba(0,0,0,.25),0 10px 18px rgba(0,0,0,.5)
}
.segment:nth-child(1){bottom:0}
.segment:nth-child(2){bottom:45px;transform:translateX(-50%) scale(.9)}
.segment:nth-child(3){bottom:85px;transform:translateX(-50%) scale(.8)}
.segment:nth-child(4){bottom:120px;transform:translateX(-50%) scale(.7)}

.igniter{
  position:absolute;
  width:16px;height:60px;
  background:linear-gradient(to right,#fff,#ccc);
  left:50%;bottom:150px;
  transform:translateX(-50%) translateZ(40px);
  border-radius:8px
}
.flame{
  position:absolute;
  font-size:34px;
  left:50%;bottom:220px;
  transform:translateX(-50%) translateZ(60px);
  animation:flicker 1s infinite alternate
}
@keyframes flicker{to{transform:translateX(-50%) scale(.85)}}

/* Confetti */
.confetti{
  position:fixed;top:-10px;width:10px;height:16px;
  animation:fall 3.2s linear forwards
}
@keyframes fall{
  to{transform:translateY(110vh) rotate(720deg);opacity:0}
}
</style>
</head>

<body>

<div class="sparks"></div>

<header>
  <h1>üéÜ Happy New Year üéÜ</h1>
  <p>A small journey to start the year right</p>
</header>

<div class="card">

<!-- COUNTDOWN -->
<div class="section">
  <div class="title">‚è≥ Countdown to the New Year</div>
  <p id="countdown"></p>
</div>

<hr>

<!-- IGNITION -->
<div class="section" data-section="ignite">
  <div class="title">üî• Ignite the Year</div>

  <div class="totem-stage">
    <div class="totem">
      <div class="segment"></div>
      <div class="segment"></div>
      <div class="segment"></div>
      <div class="segment"></div>
      <div class="igniter"></div>
      <div class="flame" id="flame">üî•</div>
    </div>
  </div>

  <input id="igniteInput" placeholder="type 'ignite'">
  <button onclick="ignite()">Ignite</button>
</div>

<hr>

<!-- REFLECTION -->
<div class="section locked hidden" data-section="reflect">
  <div class="title">üß† Reflect on the Year</div>
  <p class="small">Name one thing you‚Äôre proud of.</p>
  <input id="reflectInput" placeholder="Type here">
  <button onclick="reflect()">Continue</button>
</div>

<hr>

<!-- RESOLUTION -->
<div class="section locked hidden" data-section="resolve">
  <div class="title">üå± Set a Resolution</div>
  <p class="small">One thing you want to grow this year.</p>
  <input id="resolveInput" placeholder="Your resolution">
  <button onclick="resolve()">Lock it in</button>
</div>

<hr>

<!-- GAME -->
<div class="section locked hidden" data-section="game">
  <div class="title">üéÆ New Year Challenge</div>
  <p class="small">Guess the number (1‚Äì10)</p>
  <input id="num" type="number">
  <button onclick="guess()">Guess</button>
  <p id="numResult"></p>
</div>

<hr>

<!-- AFFIRMATION -->
<div class="section locked hidden" data-section="affirm">
  <div class="title">üí¨ Affirmation</div>
  <button onclick="affirm()">Reveal</button>
  <p id="affirmText"></p>
</div>

<hr>

<!-- FINAL -->
<div class="section locked hidden" data-section="final">
  <div class="title">üå∏ New Year Promise</div>
  <p>
    No matter how this year unfolds,  
    be gentle with yourself.  
    You‚Äôre allowed to grow slowly.
  </p>
</div>

</div>

<script>
// Background sparks
const sparks=document.querySelector(".sparks");
setInterval(()=>{
  const s=document.createElement("div");
  s.className="spark";
  s.innerText="‚ú®";
  s.style.left=Math.random()*100+"vw";
  sparks.appendChild(s);
  setTimeout(()=>s.remove(),5000);
},250);

// Confetti + vibration
function confetti(){
  for(let i=0;i<50;i++){
    const c=document.createElement("div");
    c.className="confetti";
    c.style.left=Math.random()*100+"vw";
    c.style.background=`hsl(${Math.random()*360},100%,70%)`;
    document.body.appendChild(c);
    setTimeout(()=>c.remove(),3200);
  }
}
function vibrate(){
  if(navigator.vibrate) navigator.vibrate([120,60,120]);
}

// Progress memory
let progress=JSON.parse(localStorage.getItem("nyProgress"))||{
  ignited:false,reflected:false,resolved:false,game:false
};
function save(){localStorage.setItem("nyProgress",JSON.stringify(progress))}
function unlock(name){
  const s=document.querySelector(`[data-section="${name}"]`);
  s.classList.remove("locked","hidden");
}

// Restore
if(progress.ignited) unlock("reflect");
if(progress.reflected) unlock("resolve");
if(progress.resolved) unlock("game");
if(progress.game){unlock("affirm");unlock("final")}

// Actions
function ignite(){
  if(igniteInput.value.toLowerCase()=="ignite"){
    flame.innerText="üéÜ";
    progress.ignited=true;save();
    unlock("reflect");
    confetti();vibrate();
  }
}
function reflect(){
  if(reflectInput.value.trim()){
    progress.reflected=true;save();
    unlock("resolve");
  }
}
function resolve(){
  if(resolveInput.value.trim()){
    progress.resolved=true;save();
    unlock("game");
  }
}

const secret=Math.floor(Math.random()*10)+1;
function guess(){
  const g=Number(num.value);
  if(g===secret){
    numResult.innerText="You got it üéâ";
    progress.game=true;save();
    unlock("affirm");unlock("final");
    confetti();vibrate();
  }else if(g>secret){
    numResult.innerText="Too high ‚¨ÜÔ∏è";
  }else{
    numResult.innerText="Too low ‚¨áÔ∏è";
  }
}

// Affirmations
const affirmations=[
  "You are allowed to start again üå±",
  "You don‚Äôt need to rush ‚ú®",
  "Growth counts, even quietly üíõ",
  "This year can be kinder ü§ç"
];
function affirm(){
  affirmText.innerText=
    affirmations[Math.floor(Math.random()*affirmations.length)];
}

// Countdown
const newYear=new Date("2027-01-01T00:00:00");
setInterval(()=>{
  const d=newYear-new Date();
  const cd=document.getElementById("countdown");
  if(d<=0){cd.innerText="üéâ Happy New Year!";return}
  cd.innerText=
    Math.floor(d/86400000)+"d "+
    Math.floor(d/3600000)%24+"h "+
    Math.floor(d/60000)%60+"m "+
    Math.floor(d/1000)%60+"s";
},1000);
</script>

</body>
</html>

